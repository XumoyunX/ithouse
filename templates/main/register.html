{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>

    <!-- META ============================================= -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="keywords" content=""/>
    <meta name="author" content=""/>
    <meta name="robots" content=""/>

    <!-- DESCRIPTION -->
    <meta name="description" content="EduChamp : Education HTML Template"/>

    <!-- OG -->
    <meta property="og:title" content="EduChamp : Education HTML Template"/>
    <meta property="og:description" content="EduChamp : Education HTML Template"/>
    <meta property="og:image" content=""/>
    <meta name="format-detection" content="telephone=no">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
    <!-- FAVICONS ICON ============================================= -->
    <link rel="icon" href="assets/images/favicon.ico" type="image/x-icon"/>
    <link rel="shortcut icon" type="image/x-icon" href="assets/images/favicon.png"/>

    <!-- PAGE TITLE HERE ============================================= -->
    <title>IT House Academy</title>

    <!-- MOBILE SPECIFIC ============================================= -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.min.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- All PLUGINS CSS ============================================= -->
    <link rel="stylesheet" type="text/css" href="{% static 'css/assets.css' %}">

    <!-- TYPOGRAPHY ============================================= -->
    <link rel="stylesheet" type="text/css" href="{% static 'css/typography.css' %}">

    <!-- SHORTCODES ============================================= -->
    <link rel="stylesheet" type="text/css" href="{% static 'css/shortcodes/shortcodes.css' %}">

    <!-- STYLESHEETS ============================================= -->
    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
    <link class="skin" rel="stylesheet" type="text/css" href="{% static 'css/color/color-1.css' %}">

     <style>
        #number {
            font-size: 20px;
            {#width: 433px;#}
        }
        
        .iti--allow-dropdown {
            width: 100%;
        }
    </style>

</head>
<body id="bg">
<div class="page-wraper">
    <div id="loading-icon-bx"></div>
    <div class="account-form">
        <div class="account-head" style="background-image:url({% static 'images/background/bg2.jpg' %});">
            <a href="index.html"><img style="width: 250px;" src="{% static 'images/Logos.png' %}" alt=""></a>
        </div>
        <div class="account-form-inner">
            <div class="account-container">
                <div class="heading-bx left">
                    <h2 class="title-head">Kurslarimizga ro'yxatdan o'tish</h2>
                    <p>Kurslarimizga ro'yxatdan o'tib, kelajagingiz uchun muhim qadamni tashlang!</p>
                </div>
                <form id="data-form" method="post" enctype="multipart/form-data" class="contact-bx">
                    {% csrf_token %}
                    <div class="row placeani">
                        <label>Kurslar</label>
                        <select class="form-control" id="course" name="course" required>
                            {% for i in course %}
                                <option type="text">{{ i.course_name }}</option>
                            {% endfor %}
                        </select>

                        <div class="col-lg-12 p-0  mt-4">
                            <div class="form-group">
                                <label for="name">Ism</label>
                                <input placeholder="Ism"  type="text" id="name"  required
                                       class="form-control form-control-lg">
                            </div>
                        </div>

                        <div class="col-lg-12 p-0">
                            <div class="form-group">
                                <label for="number">Telefon nomer</label>
{#                                <br>#}
                                <input id="number" type="number" style="width: 100%" class="form-control form-control-lg w-100" required >
{#                                <input value="998" type="number" id="number" placeholder="+9989"#}
{#                                       class="form-control form-control-lg" >#}
                            </div>
                        </div>
                        <div class="col-lg-12 m-b30 p-0">
                            <button type="submit" class="btn button-md">Yuborish</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>




<script>
    const form = document.getElementById('data-form');

    form.addEventListener('submit', async (event) => {
        event.preventDefault();

        const Kurs = document.getElementById('course').value;
        const Ism = document.getElementById('name').value;
        const Telefon_nomer = document.getElementById('number').value;

        try {
            const response = await fetch('https://sheetdb.io/api/v1/fuqxo7z7ox1wq', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({data: [{Kurs, Ism, Telefon_nomer}]})
            });

            if (response.ok) {
                window.location.href = "{% url 'main:course' %}"
                {#alert("Ma'lumot saqlandi!");#}
                form.reset();
            } else {
                alert("Maʼlumotlarni yuborishda xatolik yuz berdi. Iltimos, qayta urinib koʻring.");
            }
        } catch (error) {
            console.error('Error:', error);
            alert("Xatolik yuz berdi. Keyinroq qayta urinib ko‘ring.");
        }
    });




     const input = document.querySelector("#number");
        window.intlTelInput(input, {
            initialCountry: "uz", // O'zbekiston kodini boshlang'ich holat qilamiz
            separateDialCode: true, // Davlat kodini alohida ko'rsatish
            utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js" // Qo'shimcha funksiya va validatsiya uchun
        });

    
    
    
    
    
    
    
    
    
    
    
</script>

<!-- External JavaScripts -->
<script src="{% static 'js/jquery.min.js' %}"></script>
<script src="{% static 'vendors/bootstrap/js/popper.min.js' %}"></script>
<script src="{% static 'vendors/bootstrap/js/bootstrap.min.js' %}"></script>
<script src="{% static 'vendors/bootstrap-select/bootstrap-select.min.js' %}"></script>
<script src="{% static 'vendors/bootstrap-touchspin/jquery.bootstrap-touchspin.js' %}"></script>
<script src="{% static 'vendors/magnific-popup/magnific-popup.js' %}"></script>
<script src="{% static 'vendors/counter/waypoints-min.js' %}"></script>
<script src="{% static 'vendors/counter/counterup.min.js' %}"></script>
<script src="{% static 'vendors/imagesloaded/imagesloaded.js' %}"></script>
<script src="{% static 'vendors/masonry/masonry.js' %}"></script>
<script src="{% static 'vendors/masonry/filter.js' %}"></script>
<script src="{% static 'vendors/owl-carousel/owl.carousel.js' %}"></script>
<script src="{% static 'js/functions.js' %}"></script>
<script src="{% static 'js/contact.js' %}"></script>
<script src="{% static 'vendors/switcher/switcher.js' %}"></script>
</body>

</html>
